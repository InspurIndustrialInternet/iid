# **Inspur Chain DID protocol Specification**

Version 1.0.0

About 
-----

​The Inspur Chain DID (hereinafter referred to as IID) method specification conforms to the requirements specified in the DID specification currently published by the W3C Credentials Community Group. For more information about DIDs and DID method specifications, please see the[DID Primer](https://github.com/WebOfTrustInfo/rebooting-the-web-of-trust-fall2017/blob/master/topics-and-advance-readings/did-primer.md) and [DID Sepc](https://w3c-ccg.github.io/did-spec/)。

Abstract
----

iid provides distributed identifiers and blockchain-based digital identity services for people, enterprises, devices and digital objects. It aims to build a decentralized, data-secure, privacy-protected and flexible identifier system that addresses trusted connections among people, enterprises, devices and digital objects，enabling the vision of the Internet of Things and trust ingress with everything.
  
iid is built on decentralized identification protocols and equipped with characters like decentralization, self-management, privacy protection, security and ease of use. Each iid links to one Inspur chain DID Description Object (DDO).

Status of This Document
--------

​This document is now version 2.0.0 for iid specification and will be further updated. You can get access to the latest version by visiting[GitHub](https://github.com/InspurIndustrialInternet/iid/tree/main/doc/en/).

BlockChain-Based Identifier (IID)
--------

## 1. Target System(s)

   This DID method is applicable to the Inspur chain network and has been used formally since the Inspur chain released.

## 2. IID identifiers definition

A iid identifier is a simple text string consisting of three parts:

```
URL scheme identifier = did

Identifier for the DID method = iid

DID method-specific identifier  = <base-58-encoded-iid-address>
```

Example：

```
did:iid:5ypZZrSRz25SmhG9TxaqAuxJzJe96DJebhvGSjFgn8c3iBykrKEkfUv
```

## 3. IID Name Space

- The name string that shall identify this DID method is: iid

- A iid that generated by this method MUST begin with the following prefix: did:iid. Per the DID specification, this string MUST be in lowercase. The remaining part of the iid, after the prefix, is generated with algorithm in section 4.


## 4. IID Specific Identifier Generation
Two cryptographic algorithms are supported during iid identifiers generation, i.e., elliptic curve cryptography and RSA. iid identifiers are randomly generated with either of the two cryptographic algorithms, outputting keypair.Put the keypair into the base did document, then we double hash the base did document and encode the hashed string with base58.

The detailed iid identifier generation procedure is indicated in following diagram.

![avatar](https://github.com/InspurIndustrialInternet/iid/tree/main/doc/en/picture/iid-generate.png)

## 5. IID Identity Description Object

-----------

One DID description object (DDO) corresponds to one iid registered on the Inspur chain, which is open to the public to read. DDO document is uploaded by the DDO controller .

The DDO specification includes following parameters:

-   @context：Required field,a set of rules for interpreting json-ld documents, which follow the did specification and are used to realize the interoperability of different did documents，
    must contain https://www.w3.org/ns/did/v1.
    
-   id：Required field,the DDO owner' iid.

-   publicKey：Required field,publicKey,contains id,type,publicKeyHex.
    -   id: the DDO owner' iid.
    -   type：cryptographic algorithm type of the publicKey，support Secp256k1 and  RSA.
    -   publicKeyHex：hex string of the publicKey.
    
-	authentication：Required field,is a publicKey,the owner of the DDO，The party with the private key corresponding to this public key can control and manage this IID document.

-	recovery：Required field,can be used to recover public-private key pairs.

-	proof：Required field,signature of the master private key signed with DDO，contains type，creator,signatureValue.
     -   type: cryptographic algorithm type of the signature，support Secp256k1.
	
	 -  creator：signature signer.
	
	 -  signatureValue：hex string of the signature.
	
-	created：Required field,created time.

-	updated：Required field,updated time.


Following is one DDO example：

```
{
    "id":"did:iid:3rQgQUuV4mTUSB8WEAEUy29zdBNjxDWiAdL9dZYDsZu1pLT7if72H7F",
    "version":1,
    "created":"2022-05-31T08:10:01Z",
    "updated":"2022-05-31T08:10:01Z",
    "publicKey":[
        {
            "id":"did:iid:3rQgQUuV4mTUSB8WEAEUy29zdBNjxDWiAdL9dZYDsZu1pLT7if72H7F#key-1",
            "type":"secp256k1",
            "publicKeyHex":"04695bebfb4c661fa2ffa92ac72a43dec3489546798fe08c294dd652b2231ca0a9e13a5e5f0a8cd336d455658866888adeb4638d99505c530df1ab43e38034dd3a"
        },
        {
            "id":"did:iid:3rQgQUuV4mTUSB8WEAEUy29zdBNjxDWiAdL9dZYDsZu1pLT7if72H7F#key-2",
            "type":"secp256k1",
            "publicKeyHex":"043f5580a732563bbf9864415b98173f1ae78bb9b4a8ccdb8d81cab2fe15f4fd5e90efe881517f05773efc2eafdea3563e712563b1a4a687f66b8b0674bb1cbbde"
        }
    ],
    "authentication":[
        "did:iid:3rQgQUuV4mTUSB8WEAEUy29zdBNjxDWiAdL9dZYDsZu1pLT7if72H7F#key-1"
    ],
    "recovery":[
        "did:iid:3rQgQUuV4mTUSB8WEAEUy29zdBNjxDWiAdL9dZYDsZu1pLT7if72H7F#key-2"
    ],
    "service":null,
    "proof":{
        "type":"secp256k1",
        "creator":"did:iid:3rQgQUuV4mTUSB8WEAEUy29zdBNjxDWiAdL9dZYDsZu1pLT7if72H7F#keys-1",
        "signatureValue":"304402206f535aeb2dd7269ad04dc5434bdf25052091f890751be8abb0b385fea7170d3602207a6717bfc92e9fa38c6aa8253b398fbbd72dad02e2903d130130fc33ab36711e"
    },
    "@context":"https://w3id.org/did/v1"
}



```


## 5. IID method specification

--------

IID now has the following methods, which can be provided to users for adding, deleting, querying and resetting master keypair

### 5.1 Create

User calls the new method to enable the IID

```
Result new(DIDDocument doc)
```

Parameters：doc:DIDDocument object corresponding to the IID to be enabled

### 5.2 Delete

User calls the delete method to delete the IID. Only the holder of the private key corresponding to the IID can delete the IID

```
Result delete(DeleteDocument doc)
```

Parameters：doc：DeleteDocument object of the IID to be deleted

### 5.3 Read

User calls the get method to query the IID, which can be queried for everyone

```
  Result get((String iid))
```

Parameters：iid:the DDO owner' iid


### 5.4 Reset master keyPair

When the private key in the master keypair is lost, the private key in the slave keypair can be used to reset the new master and slave keyPairs.
The original slave  keypair will become the master keypair, and a new keypair will be added as the new slave keypair

```
Result reset((DIDDocument doc))
```

Parameters：doc:The DIDDocument object corresponding to the IID of the lost master key pair that to reset with
